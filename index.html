<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíå</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  html, body { height:100%; width:100%; overflow:hidden; font-family:'Courier New', cursive; }

  /* Breathing pink background */
  body {
    animation: breathe 10s ease-in-out infinite alternate;
  }
  @keyframes breathe {
    0% { background-color:#ff89c2; }
    50% { background-color:#ff6fb0; }
    100% { background-color:#ff89c2; }
  }

  .container { position: relative; width:100%; height:100%; overflow:hidden; }

  /* Heart background container */
  .heart-bg { 
    position: absolute; inset:0; 
    z-index:0; pointer-events:none; /* behind everything */
  }

  /* Heart screen */
  .heart-screen {
    position: absolute; inset:0; display:flex; align-items:center; justify-content:center;
    transition: transform 1s cubic-bezier(0.77,0,0.175,1);
    z-index:2;
  }

  .heart-screen-bg {
    position:absolute; inset:0; background:#ff89c2; z-index:-1;
  }

  .heart {
    color:white; font-size:7rem; animation:pulse 1.5s infinite ease-in-out;
    cursor:pointer; user-select:none;
  }
  @keyframes pulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.2);} }

  .slide-away { transform: translateX(-100%); }

  /* Note screen */
  .note-screen {
    position:absolute; inset:0; display:flex; flex-direction:column; align-items:center;
    justify-content:flex-start; overflow-y:auto; -webkit-overflow-scrolling:touch;
    padding:1.5rem 1rem; z-index:1; 
    background-color: rgba(250, 174, 207, 0.85); /* slightly transparent to see hearts */
  }

  /* Wrap iframe + note tightly */
  .note-container {
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:0; /* no spacing */
    width:100%;
  }

  .note-image {
    max-width:90%; height:auto; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.2);
    display:block;
  }

  .music-embed {
    width:90%;
    max-width:600px;
    border-radius:12px;
    display:block;
  }

  /* Decorative top & bottom for note */
  .note-image::before,
  .note-image::after {
    content: "‚ù§‚ù§‚ù§‚ù§‚ù§";
    display:block; text-align:center; font-size:1.2rem; color: rgba(255,105,180,0.5); letter-spacing:0.2rem;
  }
  .note-image::before { margin-bottom:0.2rem; }
  .note-image::after { margin-top:0.2rem; }

  @media(max-width:430px){
    .heart{font-size:6rem;}
    .note-screen{padding:1rem;}
    .music-embed{width:95%;}
  }

</style>
</head>
<body>
<div class="container">
  <!-- floating hearts -->
  <div class="heart-bg" id="heartBg"></div>

  <!-- heart screen -->
  <div class="heart-screen" id="heartScreen">
    <div class="heart-screen-bg"></div>
    <div class="heart">‚ô°</div>
  </div>

  <!-- note + music -->
  <div class="note-screen" id="noteScreen">
    <div class="note-container">
      <iframe class="music-embed" data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/track/0NrucXAEaaZB48N2vIDrjT?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      <img src="note.png" alt="Your handwritten note" class="note-image">
    </div>
  </div>
</div>

<script>
  const heartScreen = document.getElementById('heartScreen');
  const heart = document.querySelector('.heart');

  heart.addEventListener('click', () => {
    heartScreen.classList.add('slide-away');
  });

  const heartBg = document.getElementById('heartBg');

  // Function to create a single heart
  function createHeart() {
    const span = document.createElement('span');
    span.textContent = '‚ô°';
    span.style.position = 'absolute';
    span.style.left = Math.random() * 100 + 'vw';
    span.style.fontSize = (Math.random()*1.5 + 1.8) + 'rem';
    span.style.color = 'white';
    span.style.textShadow = '0 0 5px rgba(255,255,255,0.8)';
    span.style.animation = `floatUp ${Math.random()*10 + 15}s linear forwards`;
    heartBg.appendChild(span);
    // Remove after 25s
    setTimeout(() => { heartBg.removeChild(span); }, 15000);
  }

  // Keyframes injection for JS-created hearts
  const styleSheet = document.styleSheets[0];
  styleSheet.insertRule(`@keyframes floatUp { 0% { transform: translateY(100vh); } 100% { transform: translateY(-15vh); } }`, styleSheet.cssRules.length);

  // Spawn a heart every 300ms
  setInterval(createHeart, 300);
</script>
</body>
</html>
